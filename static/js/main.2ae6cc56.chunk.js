(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){e.exports=a(41)},21:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),i=a.n(r),u=(a(21),a(3)),o=a(2),s=a(4),l=a.n(s),f=(a(14),a(39),function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],i=a[1];return c.a.createElement("div",{id:"searchbar"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(r)},className:"ui form"},c.a.createElement("div",{className:"field"},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:""},"Image Search")),c.a.createElement("input",{className:"field",type:"text",placeholder:"Enter a term to search",value:r,onChange:function(e){return i(e.target.value)}}))))}),m=(a(40),function(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),r=a[0],i=a[1],o=Object(n.useRef)(c.a.createRef),s=e.image,l=s.description,f=s.urls;Object(n.useEffect)((function(){o.current.addEventListener("load",m)}));var m=function(){var e=o.current.clientHeight,t=Math.ceil(e/10)+2;i(t)};return c.a.createElement("div",{style:{gridRowEnd:"span ".concat(r)}},c.a.createElement("img",{ref:o,src:f.regular,alt:l}))}),E=function(e){var t=e.images.map((function(e){return c.a.createElement(m,{key:e.id,image:e})}));return c.a.createElement("div",{className:"image-list"},t,c.a.createElement("div",{ref:e.bottomBoundaryRef,id:"page-bottom-boundary"}))},p=function(){var e=Object(n.useReducer)((function(e,t){switch(t.type){case"SET_TERM":return Object(o.a)(Object(o.a)({},e),{},{term:t.term});default:return e}}),{term:""}),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(n.useReducer)((function(e,t){switch(t.type){case"STACK_IMAGES":return Object(o.a)(Object(o.a)({},e),{},{images:e.images.concat(t.images)});case"FETCHING_IMAGES":return Object(o.a)(Object(o.a)({},e),{},{fetching:t.fetching});case"REPLACE_IMAGES":return Object(o.a)(Object(o.a)({},e),{},{images:t.images});default:return e}}),{images:[],fetching:!0}),s=Object(u.a)(i,2),m=s[0],p=s[1],g=Object(n.useReducer)((function(e,t){switch(t.type){case"ADVANCE_PAGE":return Object(o.a)(Object(o.a)({},e),{},{page:e.page+1});default:return e}}),{page:0}),b=Object(u.a)(g,2),h=b[0],d=b[1];Object(n.useEffect)((function(){p({type:"FETCHING_IMAGES",fetching:!0}),l.a.get("https://api.unsplash.com/search/photos",{params:{query:a.term,per_page:20,page:h.page},headers:{Authorization:"Client-ID Nb8LsYcDEwp60Eb9OIJ6IoidWkYW3y3H0PjgrVWvzfM"}}).then((function(e){p({type:"STACK_IMAGES",images:e.data.results}),p({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){p({type:"FETCHING_IMAGES",fetching:!1}),console.log("Error happened during fetching!",e)}))}),[h.page]);var O=Object(n.useRef)(null),j=Object(n.useCallback)((function(e){new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&d({type:"ADVANCE_PAGE"})}))})).observe(e)}),[d]);return Object(n.useEffect)((function(){O.current&&j(O.current)}),[j,O]),c.a.createElement("div",{className:"App"},c.a.createElement(f,{onSubmit:function(e){r({type:"SET_TERM",term:e}),console.log(a.term),p({type:"FETCHING_IMAGES",fetching:!0}),l.a.get("https://api.unsplash.com/search/photos",{params:{query:e,per_page:20},headers:{Authorization:"Client-ID Nb8LsYcDEwp60Eb9OIJ6IoidWkYW3y3H0PjgrVWvzfM"}}).then((function(e){p({type:"REPLACE_IMAGES",images:e.data.results}),p({type:"FETCHING_IMAGES",fetching:!1})})).catch((function(e){p({type:"FETCHING_IMAGES",fetching:!1}),console.log("Error happened during fetching!",e)}))}}),c.a.createElement(E,{images:m.images,bottomBoundaryRef:O}))};i.a.render(c.a.createElement(p,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.2ae6cc56.chunk.js.map